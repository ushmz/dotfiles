# vim:fileencoding=utf-8:foldmethod=marker

background_opacity 0.8
background_blur 64
dynamic_background_opacity yes

# Fonts {{{
font_family      family="FiraCode Nerd Font"
bold_font        auto
italic_font      auto
bold_italic_font auto
font_size 13.0
font_features FiraCode +liga +rlig +ccmp -calt -dlig -hlig
font_features FiraCode-Bold +liga +rlig +ccmp -calt -dlig -hlig
font_features FiraCode-Retina +liga +rlig +ccmp -calt -dlig -hlig
# }}}


# Text cursor customization {{{
#: One of `block`, `beam`, `underline`. 
cursor_shape block
#: One of `block`, `beam`, `underline`, `hollow` and `unchanged`.
cursor_shape_unfocused hollow

#: Set to zero to disable blinking. Negative values mean use system default.
cursor_blink_interval 0
# cursor_stop_blinking_after 5.0

# }}}


# Scrollback {{{
#: One of `scrolled`, `hovered`, `scrolled-and-hovered`, `always` and `never`.
scrollbar scrolled
scrollbar_interactive yes
scrollbar_jump_on_click yes

# scrollbar_width 0.5
# scrollbar_hover_width 1
# scrollbar_handle_opacity 0.5

#: Should be less than 'scrollbar_width'
# scrollbar_radius 0.3

# scrollbar_gap 0.1

#: Prevents the handle from becoming too small when there is a lot of scrollback.
# scrollbar_min_handle_height 1

# scrollbar_hitbox_expansion 0.25
# scrollbar_track_opacity 0
# scrollbar_track_hover_opacity 0.1

# scrollback_lines 2000
# scrollback_pager nvim --cmd 'set eventignore=FileType' +'nnoremap q ZQ' +'call nvim_open_term(0, {})' +'set nomodified nolist' +'$' -
# scrollback_pager_history_size 2

# }}}


# Mouse {{{
mouse_hide_wait 3.0
# url_color #0087bd
# url_style curly
# open_url_with default
paste_actions quote-urls-at-prompt

# }}}


# Performance {{{
#: The default value (10) yields ~100 FPS which is more than sufficient for
#: most uses. Note that to actually achieve 100 FPS, you have to either set 
#: 'sync_to_monitor' to `no` or use a monitor with a high refresh rate. 
repaint_delay 10
#: You may notice some slight input latency. If so, set this to no.
sync_to_monitor no

# }}}

# Terminal bell {{{
bell_on_tab " "
# enable_audio_bell no

# }}}


# Window layout {{{
remember_window_size no
remember_window_position no
# active_border_color #00ff00
# inactive_border_color #cccccc
# bell_border_color #ff5a00
# inactive_text_alpha 1.0
# hide_window_decorations no

# }}}


# Tab bar {{{
#: see https://github.com/kovidgoyal/kitty/discussions/4447
tab_bar_style                   custom
tab_separator                   ""
tab_title_template              "{fmt.fg._415c6d}{fmt.bg.default}  {index}: {bell_symbol}{f'{title[:6]}…{title[-6:]}' if title.rindex(title[-1]) + 1 > 25 else title}{' []' if layout_name == 'stack' else ''} "
active_tab_title_template       "{fmt.fg._83b6af}{fmt.bg.default}  {index}: {bell_symbol}{f'{title[:6]}…{title[-6:]}' if title.rindex(title[-1]) + 1 > 25 else title}{' []' if layout_name == 'stack' else ''} "
tab_fade                        0 0 0 0
tab_bar_edge                    top
tab_bar_align                   left
tab_bar_margin_width            0.0
tab_bar_margin_height           3.0 0.0
active_tab_font_style           bold-italic
inactive_tab_font_style         normal
tab_bar_min_tabs                2
tab_activity_symbol             none
tab_title_max_length 120

# }}}


# Advanced {{{
# HACK: passing environment variables to GUI applications in macOS is very hard
# so this works around that by specifying the path to homebrew installations here
# this only provides the $PATH not all the missing environment variables.
# env PATH=/opt/homebrew/bin/:/usr/local/bin/:${PATH}
shell /opt/homebrew/bin/zsh -l -c '/opt/homebrew/bin/tmux new -A -s kitty'
editor nvim
# allow_cloning ask
# clone_source_strategies venv,conda,env_var,path
notify_on_cmd_finish invisible 180 notify-bell 

# }}}

# OS specific tweaks {{{
macos_option_as_alt yes
macos_quit_when_last_window_closed yes
macos_show_window_title_in window
macos_menubar_title_max_length 120

# }}}


# Keyboard shortcuts {{{
kitty_mod ctrl+shift
clear_all_shortcuts no

#: Next tab
# map kitty_mod+right next_tab
map shift+cmd+]     next_tab
# map ctrl+tab        next_tab

#: Previous tab
# map kitty_mod+left previous_tab
map shift+cmd+[    previous_tab
# map ctrl+shift+tab previous_tab

#: New tab
map kitty_mod+t new_tab
map cmd+t       new_tab

#: Close tab
map kitty_mod+q close_tab
map cmd+w       close_tab

#: Move tab forward
map kitty_mod+. move_tab_forward

#: Move tab backward
map kitty_mod+, move_tab_backward

#: Set tab title
# map kitty_mod+alt+t set_tab_title
# map shift+cmd+i     set_tab_title

#: Increase font size
map cmd+plus change_font_size all +1.0

#: Decrease font size
map cmd+minus change_font_size all -1.0

#: Reset font size
map cmd+equal change_font_size all 0

#: Open URL
# map kitty_mod+e open_url_with_hints

#: Insert selected path
# map kitty_mod+p>f kitten hints --type path --program -

#: Open selected path
# map kitty_mod+p>shift+f kitten hints --type path

#: Insert chosen file
# map kitty_mod+p>c kitten choose-files

#: Insert chosen directory
# map kitty_mod+p>d kitten choose-files --mode=dir

#: Insert selected line
# map kitty_mod+p>l kitten hints --type line --program -

#: Insert selected word
# map kitty_mod+p>w kitten hints --type word --program -

#: Insert selected hash
# map kitty_mod+p>h kitten hints --type hash --program -

#: Open the selected file at the selected line
# map kitty_mod+p>n kitten hints --type linenum

#: Open the selected hyperlink
# map kitty_mod+p>y kitten hints --type hyperlink

#: Toggle fullscreen
map ctrl+cmd+f    toggle_fullscreen

#: macOS Cycle through OS Windows
map cmd+` macos_cycle_through_os_windows

#: macOS Cycle through OS Windows backwards
map cmd+shift+` macos_cycle_through_os_windows_backwards

#: Unicode input
# map kitty_mod+u    kitten unicode_input
# map ctrl+cmd+space kitten unicode_input

#: Edit config file
map cmd+,        edit_config_file

#: Clear to start
# map cmd+k clear_terminal to_cursor active

#: Clear scrollback
# map option+cmd+k clear_terminal scrollback active

#: Clear the last command
map cmd+l clear_terminal last_command active

#: Clear screen
map cmd+ctrl+l clear_terminal to_cursor_scroll active

#: Reload kitty.conf
map ctrl+cmd+,   load_config_file

#: Hide macOS kitty application
map cmd+h hide_macos_app

#: Hide macOS other applications
map opt+cmd+h hide_macos_other_apps

#: Minimize macOS window
map cmd+m minimize_macos_window

#: Quit kitty
map cmd+q quit

# }}}


# BEGIN_KITTY_THEME
# Kanagawa_dragon
include current-theme.conf
# END_KITTY_THEME
#
#: see https://sw.kovidgoyal.net/kitty/faq/#i-do-not-like-the-kitty-icon
